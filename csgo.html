<!DOCTYPE html>
<html ng-app>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CS:GO Dashboard</title>

    <!-- Latest compiled and minified CSS -->
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css"> -->
    <link rel="stylesheet" type="text/css" href="bootstrap.slate.min.css">

    <!-- Custom styles for this template -->
    <link href="misc.css" rel="stylesheet">
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.1.4/angular.min.js"></script>
</head>
  <body>
    <div class="visible-xs container">
      <div class="vertical-center-row">
        <div class="alert alert-danger"><h3>This website is only usable on desktop and laptop computers&hellip;</h3><br>Are you trying to play CS:GO on your phone? If not try making the browser window larger.</div>
      </div>
    </div>
    <div class="hidden-xs">
      <video autoplay loop id="bgvid">
        <source src="http://zippy.gfycat.com/BoilingWiltedJohndory.webm" type="video/webm">
      </video>
      <div class="container">
        <div class="row">
          <div class="row">&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;</div>
          <div class="row">
            <div id="reloadHint" class="col-md-12" style="display:none">
              <div class="alert alert-dismissible alert-info h4">
                <button type="button" class="close" data-dismiss="alert">Ã—</button>
                Hint: Try reloading the page to see the updated status of a server.
              </div>
            </div>
          </div>
          <div class="row">
            
            <!-- CSGO -->
            <div class="col-md-4 btn-group-vertical" ng-controller="CSGO_server_Ajax">
              <a ng-class='{disabled: !csgoLoaded}' class="btn btn-lg btn-block btn-default" href="steam://connect/csgoserver.michno.me/" data-toggle="tooltip" data-placement="top" title="" data-original-title="Click to connect to server">
                Connect to<br><h2>CS:GO server</h2>
              </a>
              <a href="#" class="btn btn-primary btn-lg btn-block" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Click to show more info">
                <div ng-show="csgoLoaded" ng-cloak>
                  Server: <code>{{csgoData.query.host}}</code> 
                  <span ng-class='{"label-danger": csgoData.status == "offline", "label-success": csgoData.status == "online"}' class="label">{{csgoData.status}}</span>
                  <br><br>Map: {{csgoData.map}} | 
                  Players: {{csgoData.raw.numplayers}} / {{csgoData.maxplayers}}
                </div>
                <div class='h3' ng-hide="csgoLoaded">Loading&hellip;</div>
              </a>
            </div>
            
            <!-- Mumble -->
            <div class="col-md-4 btn-group-vertical" ng-controller="mumble_server_Ajax">
              <a ng-class='{disabled: !mumbleLoaded}' class="btn btn-default btn-lg btn-block" href="mumble://mumble.michno.me/?version=1.2.0" data-toggle="tooltip" data-placement="top" title="" data-original-title="Click to connect to server">
                Connect to<br><h2>Mumble Server</h2>
              </a>  
              <a href="#" class="btn btn-primary btn-lg btn-block" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Click to show more info">
                <div ng-show="mumbleLoaded" ng-cloak>
                  Server: <code>{{mumbleData.query.host}}</code> 
                  <span ng-class='{"label-danger": mumbleData.status == "offline", "label-success": mumbleData.status == "online"}' class="label">{{mumbleData.status}}</span>
                  <br><br>Slots: {{mumbleData.raw.numplayers}} / {{mumbleData.maxplayers}}
                </div>
                <div class='h3' ng-hide="mumbleLoaded">Loading&hellip;</div>
              </a>
            </div>
            
            <!-- Teamspeak3 -->
            <div class="col-md-4 btn-group-vertical" ng-controller="ts3_server_Ajax">
              <a ng-class='{disabled: !ts3Loaded}' class="btn btn-lg btn-block btn-default" href="ts3server://ts.michno.me?port=9987" data-toggle="tooltip" data-placement="top" title="" data-original-title="Click to connect to server">
                Connect to<br><h2>Teamspeak3 Server</h2>
              </a>
              <a href="#" class="btn btn-primary btn-lg btn-block" data-toggle="tooltip" data-placement="bottom" title="" data-original-title="Click to show more info">
                <div ng-show="ts3Loaded" ng-cloak>
                  Server: <code>{{ts3Data.query.host}}</code> 
                  <span ng-class='{"label-danger": ts3Data.status == "offline", "label-success": ts3Data.status == "online"}' class="label">{{ts3Data.status}}</span>
                  <br><br>Slots: {{ts3Data.raw.virtualserver_clientsonline - 1}} / {{ts3Data.maxplayers-ts3Data.raw.virtualserver_reserved_slots}} (+ {{ts3Data.raw.virtualserver_reserved_slots}} reserved)
                </div>
                <div class='h3' ng-hide="ts3Loaded">Loading&hellip;</div>
              </a>
            </div>

          </div>
        </div>
      </div>
    </div>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script type="text/javascript">
    $(function () { 
      $("[data-toggle='tooltip']").tooltip(); 
    });
    $('#reloadHint').delay(15000).show('fast');
    </script>
    
    <!-- Angular controllers (should be moved to seperate file) -->
    <script type="text/javascript">
    function CSGO_server_Ajax($scope, $http) {
      $http({method: 'GET', url: 'http://api.michno.me:3000/gameserverquery/csgo/csgoserver.michno.me'}).success(function(data) {
        $scope.csgoData = data; // response data 
        $scope.csgoLoaded = true;
      });
    };
    function mumble_server_Ajax($scope, $http) {
      $http({method: 'GET', url: 'http://api.michno.me:3000/gameserverquery/mumbleping/mumble.michno.me'}).success(function(data) {
        $scope.mumbleData = data; // response data 
        $scope.mumbleLoaded = true;
      });
    };
    function ts3_server_Ajax($scope, $http) {
      $http({method: 'GET', url: 'http://api.michno.me:3000/gameserverquery/ts3/ts.michno.me/9987'}).success(function(data) {
        $scope.ts3Data = data; // response data 
        $scope.ts3Loaded = true;
      });
    }
    </script>

  </body>
</html>